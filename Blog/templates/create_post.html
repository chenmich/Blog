{%extends 'bootstrap/base.html'%}

{% block title %}
    创建博文
{% endblock title %}

{%block content%}
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">其它作者</h4>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="other_writers">请选择作者姓名</label>
                {{form.other_writers(class_='form-control', form='create_post')}}
                
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        </div>
    </div>
</div> 
<form id='create_post' method='post'>
    {{ form.csrf_token }}
</form>
<div class='container'>
    <div class='row' >
        <h2>创建博客文章</h2>
    </div>
    <div class="form-group">
        {{form.post_title.label(for_='title', form='create_post')}}
        {{form.post_title(class="form-control", form='create', **{'aria-describedby':'titleHelp'})}}              
        <small id="titleHelp" class="form-text text-muted">请在这里输入文章的标题</small>
    </div>
    <div class='row'>                
        <button type='button' class='btn btn-secondary' id='btn-writers' >
            其它作者<span class="badge badge-light" id='selected_name'></span>
        </button>                        
    </div>  
    <div class='form-group' style="padding:6px">
        {{ form.submit_post(class_='btn btn-success', form='create_post')}}
    </div>

</div>  
{% endblock content%}
{%block scripts%}
    {%include 'bootstrapScripts.html' ignore missing %}
    <script type='text/javascript'>        
        $(function(){
            $("#btn-writers").on('click', function(){
                $('#myModal').modal('show')
            })
            $('#other_writers').on('change', function(){
                var selected_writers = this.selectedOptions
                var selected_name = selected_writers[0].text
                for(i = 1; i < selected_writers.length; i++){
                    selected_name = selected_name + ' , ' + selected_writers[i].text
                }
                $('#selected_name').text(selected_name)
            })
        })
            
    </script>
{%endblock scripts%}